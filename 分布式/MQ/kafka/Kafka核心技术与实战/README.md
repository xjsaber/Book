# Kafka核心技术 #

# 开篇词 #

## 开篇词 | 为什么要学习Kafka ##


# kafka入门 #

## 01 | 消息引擎系统ABC ##

Apache Kafka是一款开源的消息引擎系统。

* 点对点模型：也叫消息队列模型。
* 发布/订阅模型：有个主题（Topic）的概念，理结成逻辑语义相近的消息容器。该模型也有发送方（发布者）和接收方（订阅者）。可能存在多个发布者相同的主题发送消息，而订阅者也可能存在多个。

系统A不能直接发送消息给消息B，中间还要隔一个消息引擎，是为了“削峰填谷”。

## 02 | 一篇文章带你快速搞定Kafka术语 ##

在Kafka中，发布订阅的对象是主题（Topic）。

向主题发布消息的客户端应用程序称为生产者（Producer），生产者程序通常持续不断地向一个或多个主题发送消息，而订阅这些主题消息的客户端应用程序就被称为消费者。和生产者类似，消费者也能够订阅多个主题的消息。我们把生成者和消费者统称为客户端（Clients）。

### 小结 ###

消息：Record。kafka是消息引擎，这里的消息就是指Kafka处理的主要对象。
主题：Topic。主题是承载消息的逻辑容器。在实际使用终多用来区分具体的业务。
分区：Partition。一个有序不变的消息序列。每个主题中可以有多个分区。
消息位移：Offset。表示分区中同一条消息能够被拷贝到多个地方以提供数据冗余，这些地方就是所谓的副本。副本
副本：Replica。Kafka中同一条消息能够被拷贝到多个地方以提供数据冗余，这些地方都是所谓的副本。副本还分为领导者副本和追随者副本，各自有不同的角色划分。副本是在分区层级下的，即每个分区可配置多个副本实现高可用。
生产者：Producer。向主题发布新消息的应用程序。
消费者：Consumer。从主题订阅新消息的应用程序。
消费者位移：Consumer Offset。表征消费者消费进度，每个消费者都有自己的消费者位移。
消费者组：Consumer Group。多个消费者实例组成的一个组，同时消费多个分区以实现高吞吐。
重平衡：Rebalance。消费者组内某个消费者实例挂掉之后

## 03 | Kafka只是消息引擎系统吗？ ##

## 04 | 我应该选择哪种Kafka？ ##

## 05 | 聊聊Kafka的版本号 ##

## 07、08 | 最最最重要的集群参数配置 ##

### Broker端参数 ###

log.dirs：在线上生产环境配置多个路径，

* 提升读写性能
* 能够实现故障转移



### 小结 ###

### Topic级别参数 ###

### JVM参数 ###

### 操作系统参数 ###

### 小结 ###

#### Broker端参数 ####

* 与存储信息相关的参数
* 与Zookeeper相关的参数
* 与Broker连接相关的参数
* 关于Topic管理的参数
* 关于数据留存的参数：`log.retention.{hour|minutes|ms}`、`log.retention.bytes`和`message.max.bytes`

#### Topic级别参数 ####

* retention.ms
* max.message.bytes：决定了Kafka Broker能够正常接收该Topic的最大消息大小。

#### JVM ####

* KAFKA_HEAP_OPTS：指定堆大小
* KAFKA_JVM_PERFORMANCE_OPTS：指定GC参数

#### 操作系统参数 ####

* 文件描述符限制
* 文件系统类型
* Swapping
* 提交时间