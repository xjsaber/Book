# Redis核心技术与实战

## 开篇词 | 这样学Redis，才能技高一筹

高性能键值数据库[HikV](https://www.usenix.org/conference/atc17/technical-sessions/presentation/xia)。

遇见的“坑”，总体来说集中在四个方面：

* CPU 使用上的“坑”，例如数据结构的复杂度、跨 CPU 核的访问；
* 内存使用上的“坑”，例如主从同步和 AOF 的内存竞争；
* 存储持久化上的“坑”，例如在 SSD 上做快照的性能抖动；
* 网络通信上的“坑”，例如多实例时的异常网络丢包。

### 为什么懂得了一个个技术点，却依然用不好 Redis？

很多同学都是带着一个个具体的问题来学这门课的，比如说，Redis 数据怎么做持久化？集群方案应该怎么做？这些问题当然很重要，但是，如果你只是急于解决这些细微的问题，你的 Redis 使用能力就很难得到质的提升。

很多技术人都有一个误区，那就是，**只关注零散的技术点，没有建立起一套完整的知识框架，缺乏系统观，但是，系统观其实是至关重要的**。从某种程度上说，在解决问题时，拥有了系统观，就意味着你能有依据、有章法地定位和解决问题。

* **高性能主线**
* **高可靠主线**
* **高可扩展主线**

在应用维度上，按照两种方式学习：“**应用场景驱动**”和“**典型案例驱动**”，一个是“面”的梳理，一个是“点”的掌握。

* 缓存和集群是 Redis 的两大广泛的应用场景。在这些场景中，本身就具有一条显式的技术链。比如说，提到缓存场景，你肯定会想到缓存机制、缓存替换、缓存异常等一连串的问题。

* Redis 丰富的数据模型，就导致它有很多零碎的应用场景。还有一些问题隐藏得比较深，只有特定的业务场景下（比如亿级访问压力场景）才会出现，并不是普遍现象，所以，我们也比较难于梳理出结构化的体系。
  * 用“典型案例驱动”的方式学习
  * 重点解读一些对 Redis 的“三高”特性影响较大的使用案例，例如，多家大厂在万亿级访问量和万亿级数据量的情况下对 Redis 的深度优化，解读这些优化实践，非常有助于你透彻地理解 Redis
  * 梳理一些方法论，做成 Checklist

![70a5bc1ddc9e3579a2fcb8a5d44118b4.jpeg](img/70a5bc1ddc9e3579a2fcb8a5d44118b4.jpeg)

按照“问题 --> 主线 --> 技术点”的方式梳理出来

### 课程是如何设计的？

**基础篇：打破技术点之间的壁垒，带你建立网状知识结构**

1. 构造一个简单的键值数据库入手
2. 会具体讲解数据结构、线程模型、持久化等几根“顶梁柱”

**实践篇：场景和案例驱动，取人之长，梳理出一套属于你自己的“武林秘籍”**

1. 在学习时，我们需要以“场景”和“案例”作为驱动
   * 在“案例”层面，我会介绍数据结构的合理使用、避免请求阻塞和抖动、避免内存竞争和提升内存使用效率的关键技巧；
   * 在“场景”层面，我会重点介绍缓存和集群两大场景。
2. 对于缓存而言，我会重点讲解缓存基本原理及淘汰策略，还有雪崩、穿透、污染等异常情况；
3. 对于集群来说，我会围绕集群方案优化、数据一致性、高并发访问等问题，和你聊聊可行的解决方案。

**未来篇：具有前瞻性，解锁新特性**

1. 6.0的新特性
2. 当前业界对 Redis 的最新探索

Redis是一个非常优秀的系统，它在 CPU 使用、内存组织、存储持久化和网络通信这四大方面的设计非常经典。

## 01 | 基本架构：一个键值数据库包含什么？

### 可以存哪些数据？

## 02 | 数据结构：快速的Redis有哪些慢操作