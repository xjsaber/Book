# 分布式系统：概念与设计 #

# 第1章 分布式系统的特征 #

## 1.1 简介 ##

并发

缺乏全局时钟

故障独立性

## 1.2 分布式系统的例子 ##

### 1.2.1 Web搜索 ###

### 1.2.2 大型多人在线游戏 ###

### 1.2.3 金融交易 ###

分布式基于事件的系统。

## 1.3 分布式系统的趋势 ##

### 1.3.1 泛在联网和现代互联网 ###

## 1.4 关注资源共享 ##

## 1.5 挑战 ##

### 1.5.1 异构型 ###

中间件

异构型和移动代码

### 1.5.2 开放性 ###

* 发布系统的关键接口是开放系统的特征
* 开放的分布式系统是基于一致的通信机制和发布接口
* 开放的分布式系统能用不同销售商提供的异构硬件和软件构造，但是如果想让系统正确工作，就要仔细测试和验证每个组建与发布的标准之间的一致性。

### 1.5.3 安全性 ###

机密性（防止泄露给未授权的个人）、完整性（防止被改变或被破坏）、可用性（防止对访问资源的手段的干扰）

* 拒绝服务攻击：大量无意义的请求攻击服务，使得重要的用户不能使用它。被成为拒绝服务攻击。
* 移动代码的安全性： 移动代码需要小心处理。

### 1.5.4 可伸缩性 ###

* 控制物理资源的开销：
* 控制性能损失
* 防止软件资源耗尽
* 避免性能瓶颈

### 1.5.5 故障处理 ###

检测故障：

掩盖故障：有些被检测到的故障被隐藏起来或降低它的严重程度

1. 消息在不能到达时进行重传
2. 将文件数据写入两个磁盘，如果一个磁盘损坏，那么另一个磁盘的数据仍是正确的。

容错：

故障恢复：恢复涉及软件的设计，以便在服务器崩溃后，永久书的状态能被恢复或“回滚”。通常，在出现错误时，程序完成的计算是不完整的，被更新的永久数据（文件和其他泊岸村在永久存储介质中的资料）可能处在不一致的状态。

冗余：利用冗余组件，服务可以实现容错。

1) 在互联网的任何两个路由器之间，至少应该存在两个不同的路由。
2）在域名系统中，每个名字表至少被复制到两个不同的服务器上。
3）数据库可以被复制到两个服务器上，以保证在任何一个服务器出现故障后数据仍是可访问的。

### 1.5.6 并发性 ###

在分布式系统中，代表共享资源的任何一个对象必须负责确保它在并发环境中操作正确，不仅用于服务器，也适用于应用中的对象。

### 1.5.7 透明性 ###

透明性被定义成对用户和应用程序员屏蔽分布式系统的分离性，使系统被认为是一个整体，而不是独立组件的集合。

* 访问透明性：用相同的操作访问本地资源和远程资源。
* 位置透明性：不需要知道资源的物理或网络位置（例如，哪个建筑物或IP地址）就能够访问它们
* 并发透明性：几个进程能并发地使用共享资源进行操作且互不干扰。
* 故障透明性：屏蔽错误，无论是硬件组件故障还是软件组件故障，用户和应用程序都能够完成它们的任务。
* 移动透明性：资源和客户能够在系统内移动而不会影响用户或程序的操作。
* 性能透明性：当负载变化时，系统能被重新配置以提高性能。
* 伸缩透明性：系统和应用能够进行扩展而不改变系统结果或应用算法。

最重要的两个透明性是访问透明性和位置透明性。

### 1.5.8 服务质量 ###

可靠性、安全性和性能

Qos用于指系统满足这样的截止时间的能力，它的实现取决于所需要的计算和网络资源在相应时刻的可用性。

## 1.6 实例研究：万维网 ##

## 1.7 小结 ##

* 异构型：分布式系统必须由多种不同的网络、操作系统、计算机硬件和编程语言组成。互联网通信协议屏蔽了网路哦的差异，中间性能处理其他的差异。
* 开放性：分布式系统应该是可扩展的——第一步是发布组件的接口，但由不同程序员编写的组件的集成是一个真正的挑战。
* 安全性：加密用于为共享资源提供充分的保护，在网络上用消息传送敏感信息时，可以通过加密的手段来保护敏感信息。服务拒绝攻击仍然是一个问题。
* 可伸缩性：就必须要增加的资源而言，如果分布式系统增加一个用户的开销是一个常量，那么这个分布式系统是可伸缩的。用于访问共享数据的算法应该避免性能瓶颈，数据应该组织成层次化的结构以获得最好的访问时间。频繁访问的数据应该能复制。
* 故障处理：任一进程、计算机或网络都可能独立地出现故障。
* 并发性：分布式系统中多个用户的存在是对资源产生并请求的根源。每个资源必须被设计成在并发环境中是安全的。
* 透明性：此特性的目的是为了保证分布的某些方面对应用程序不可见，这样应用程序员只需要关心特定应用的设计问题。
* 服务质量：在分布式系统中仅提供对服务的访问是不够的。

## 第2章 系统模型 ##

### 2.1 简介 ###

* 物理模型是描述系统的一个最显式的方法，它从计算机（和其他设备，例如移动电话）及其互联的网络方面考虑的硬件组成。
* 体系结果模型从系统的计算元素执行的计算和通信任务方面来描述系统。
* 基础模型采用抽象的观点描述分布式系统的某个方面。

**分布式系统的困难和威胁**

* 使用模式的多样性：系统的组件会承受各种工作负载
* 系统环境的多样性：分布式系统必须能容纳异构的硬件、操作系统和网络。网络可能在性能上有很大的不同。
* 内部问题：包括非同步的时钟、冲突的数据更新、多种涉及系统单个组件的软硬件故障模式。
* 外部威胁：包括对数据完整性、保密性以及

## 2.2 物理模型 ##

* 基线物理模型
* 早起的分布式系统
* 互联网规模的分布式系统
* 当代的分布式系统

## 2.3 体系结构模型 ##

### 2.3.1 体系结构元素 ###

* 在分布式系统中进行通信的实体是什么？
* 它们如何通信，特别是使用什么通信范式

# 第3章 网络和网际互连 #

## 3.1 简介 ##

**分布式系统的连网问题**


移动性、服务质量、组播

## 3.2 网络类型 ##

## 3.3 网络原理 ##

### 3.3.1 数据包的传输 ###

发送信息和消息——任意长度的数据串。在消息传递前，被分割成数据包。形式最简单的数据包是长度有限的二进制数据序列（比特或字节数组）以及识别源和目的地的寻址信息。

* 网络中的每台计算机能为可能到来的最大数据包分配足够的缓冲空间。
* 避免长时间不加分割地传递所引起的为等待通信通道空闲而出现的过度延迟。

### 3.3.2 数据流 ###


### 3.3.3 交换模式 ###

广播、点路交换、包交换、帧中继

### 3.3.4 协议 ###

协议是指为了完成给定任务，进程间通信所要用到的一组众所周知的规则和格式。协议的定义包括两个重要的部分：

* 必须交换的协议的顺序的规约。
* 消息中数据格式的规约。

协议层

协议组

数据包组装

端口

寻址	



### 3.3.5 路由 ###

大型网络中，采用的是自适应路由，即网络两点间通信的最佳路由会周期性地重新评估。

路由算法

### 3.3.6 拥塞控制 ###

### 3.3.7 网际互连 ###

路由器

网桥

集线器

交换机

隧道

## 3.4 互联网协议 ##

### 3.4.1 IP寻址 ###

* 通用——任何主机必须可以发送数据包给互联网中的任何其他主机
* 地址空间的使用
* 寻址方案必须有助于开发灵活有效的路由方案。

### 3.4.2 IP协议 ###

### 3.4.3 IP路由 ###

### 3.4.4 IPv6 ###

# 第4章 进程间通信 #

消息传递接口（Message Passing Interface，MPI）是一个标准，为一组具有同步和异步支持的消息传递操作提供API。

## 4.1 简介 ##

UDP的应用程序接口提供了消息传递（message passing）抽象——进程间通信的最简单形式。

TCP的应用程序接口提供了进程对之间的双向流（two-way stream）抽象。

## 4.2 互联网协议的API ##

### 4.2.1 进程间通信的特征 ###

同步和异步通信

消息目的地

可靠性

排序

### 4.2.2 套接子 ###

InetAddress，用以标识互联网地址。

### 4.2.3 UDP数据报通信 ###

进程发送（send）数据报，进程接收（receive）。

消息大小（message size）：接收进程要指定固定大小

# 第8章 分布式对象和组件 #

## 8.1 简介 ##

分布式对象中间件

基于组件的中间件

## 8.2 分布式对象 ##

* 分布式系统
* 编程语言
* 软件工程

|对象|分布式对象|分布式对象的描述|
|--|--|--|
|对象引用|远程对象引用|分布式对象的描述|
|接口|远程接口|提供在远程对象上可以调用的方法的抽象规约，该规约使用接口定义语言（IDL）指定|
|动作|分布式动作|由方法调用初始化，可能会形成调用链；使用RMI进行远程调用|
|异常|分布式异常|由于系统的分布特性，会产生额外的异常，例如消息丢失或进程故障|
|垃圾回收|分布式回收|需要分布式垃圾回收算法，扩展现有模式确保对象在至少有一个本地或远程引用时必须存在，否则应该回收它|

* 类，在分布式对象中，避免使用术语“类”，而乐意使用“工厂”和“模板”这样更特定的术语（一个工厂对象通过一个给定模板实例化一个新的对象）。

* 继承，分布式对象中间件提供接口继承

新增的复杂性

## 8.3 实例研究：CORBA ##

### 8.3.1 CORBA RMA ###

# 第9章 Web服务 #

## 9.1 简介 ##

SOAP协议

## 9.2 Web服务 ##

* 服务引用
* 服务的激活
* 透明性

### 9.2.1 SOAP ###

### 9.2.2 Web服务与分布式对象模型的比较 ###



