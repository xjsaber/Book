# 第五章 设备管理 #
设备管理的对象主要是I/O设备，还可能要涉及到设备控制器和I/O通道。

## 5.1 I/O系统 ##
I/O 系统是用于实现数据输入、输出及数据存储的系统。
### 5.1.1 I/O设备 ###
#### 1.I/O设备的类型 ####
设备使用特性、数据传输速率、数据的船速单位、设备共享属性等。
1）按设备的使用特性分类
按设备的使用特性，可将设备分为两类。第一类是存储设备，也称
2）按传输速率分类
按传输速度的高低，可将I/O设备分为三类。
第一类是低速设备
第二类是中速设备
第三类是高速设备

3）按信息交换的单位分类
按信息交换的单位，可将I/O设备分成两类。第一类是块设备（Block Device），这类设备用于存储信息。第二类是字符设备(Character Device)，用于数据的输入和输出。其基本单位是字符，故称为字符设备。

4）按设备的共享属性分类

（1）独占设备。这是指在一段时间内只允许一个用户（进程）访问的设备，即临界资源。

（2）共享设备。这是指在一段时间内允许多个进程同时访问的设备。

（3）虚拟设备。指通过虚拟技术将一台独占设备变换为若干逻辑设备，供若干个用户（进程）同时使用。

#### 2.设备与控制器之间的接口 ####
设备并不是直接与 CPU 进行通信，而是与设备控制器通信

1）数据信号线

2）控制信号线

3）状态信号线

### 5.1.2 设备控制器 ###
设备控制器是计算机中的一个实体，其主要职责是控制一个或多个I/O设备，以实现I/O设备和计算机之间的数据交换。设备控制器的复杂性因不同设备而异，相差甚大，于是可把设备控制器分成两类: 一类是用于控制字符设备的控制器，另一类是用于控制块设备的控制器。

#### 1.设备控制器的基本功能 ####
1）接收和识别命令
CPU 可以向控制器发送多种不同的命令，设备控制器应能接收并识别这些命令。
2）数据交换

3）标识和报告设备的状态
控制器应记下设备的状态供CPU了解。

4）地址识别

5）数据缓冲

6）差错控制

#### 2.设备控制器的组成 ####
由于控制设备器位于CPU与设备之间，它既要与CPU通信看，又要与设备通信，还应具有按照CPU所发来的命令去控制设备工作的功能。
1）设备控制器与处理机的接口
该接口用于实现CPU与设备控制器之间的通信。
2）设备控制器与设备的接口
在一个设备控制器上，可以连结一个或多个设备。
3）I/O逻辑
在设备控制器中的I/O逻辑用于实现对设备的控制。

### 5.1.3 I/O通道 ###
1.I/O通道（I/O Channel）设备的引入

2.通道类型

1)字节多路通道（Byte Multiplex or Channel）
通道是用于控制外围设备（包括自负设备和块设备）的。

2）数组选择通道

3）“瓶颈”问题
解决“瓶颈”问题的最有效的方法，便是增加设备到主机间的通路而不增加通道，就是把一个设备连接到多个控制器上，而一个控制器又连接到多个通
道上。

### 5.1.4 总线系统 ###
在计算机系统中的各部件，如 CPU、存储器以及各种 I/O 设备之间的联系，都是通过总线来实现的。总线的性能是用总线的时钟频率、带宽和相应的总线传输速率等指标来衡量的。随着计算机中 CPU 和内存速率的提高，字长的增加，以及不断地引入新型设备，促使人们对总线的时钟频率、带宽和传输速率的要求也不断提高。

#### 1.ISA和EISA总线 ####

1）ISA（Industry Standard Architecture）总线

2）EISA（Extended ISA）总线

#### 2.局部总线（Local Bus） ####
EISA 总线已难于满足要求，局部总线便应运而生。所谓局部总线，是指将多媒体卡、高速 LAN 网卡、高性能图形板等，从 ISA 总线上卸下来，再通过局部总线控制器直接接到 CPU 总线上，使之与高速 CPU 总线相匹配。


## 5.5 设备分配 ##

### 5.5.1 设备分配中的数据结构  ###

#### 1．设备控制表(DCT)  ####

### 5.5.2 设备分配时应考虑的因素  ###
 ① 设备的固 有属性；② 设备分配算法；③ 设备分配时的安全性；④ 设备独立性。

#### 1．设备的固有属性  ####
第一种是独占性，是指这种设备在一段时间内只允许一个进程独占，此即第二章所说的“临 界资源”；第二种是共享性，指这种设备允许多个进程同时共享；第三种是可虚拟设备。

(1) 独占设备

(2) 共享设备

(3) 可虚拟设备

#### 2．设备分配算法  ####

##### (1) 先来先服务。 #####

##### (2) 优先级高者优先。 #####

#### 3．设备分配中的安全性  ####

1) 安全分配方式 

2) 不安全分配方式 

### 5.5.3 独占设备的分配程序  ###

#### 1．基本的设备分配程序 ####

##### 1) 分配设备 #####

2) 分配控制器 

3) 分配通道

### 5.5.4 SPOOLing技术  ###
虚拟性是 OS 的四大特征之一。，通过 SPOOLing 技术 便可将一台物理 I/O 设备虚拟为多台逻辑 I/O 设备，同样允许多个用户共享一台物理 I/O 设备。 

#### 1．什么是SPOOLing  ####

#### 2．SPOOLing 系统的组成  ####