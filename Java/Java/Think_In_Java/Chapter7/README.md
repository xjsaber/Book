# 第7章 复用类 #

复用代码是Java众多引人注目的功能之一。但要想成为极具革命性的语言，仅仅能够复制代码并对之加以改变是布狗的，它还必须能够做更多的事情。

第一种方法非常直观：只需要在新的类中产生现有类的对象。由于新的类是由现有类的对象所组成，所以这种方法称为组合。该方法只是复用了现有程序代码的功能。

第二种方法则更细致一些，按照现有类的类型来创建新类。

## 7.1 包：组合语法 ##

组合技术，只需要将对象引用置于新类中即可。

1. 在定义对象的地方。这意味着它们总是能够在构造器被调用之前被初始化。
2. 在类的构造器中。
3. 就在正要使用这些对象之前，这种方式称为*惰性初始化*。在生成对象不值得及不必每次都生成对象的情况下，这种方式可以减少额外的负担。
4. 使用实例初始化。

//TODO 练习1

## 7.2 继承语法 ##

继承是所有OOP语言和Java语言不可缺少的组成部分。当创建一个类时，总是在继承，因此，除非已明确指出要从其他类中继承，否则就是在隐式地从Java标准根类Object进行继承。

//TODO 练习2

### 7.2.1 初始化基类 ###

默认访问权限没有任何关键字，但通常是指包访问权限（有时也可以表示成为**friendly**）。由于一个编译单元（即一个文件），只能隶属于一个包，所以经由包访问权限，处于同一个编译单元中的所有类彼此之间都是自动可访问的。

1. 使该成员成为piblic。
2. 通过不加访问权限修饰词并将其他类放置于同一个包内的方式给成员赋予包访问权。于是包内的其他类也就可以访问该成员。
3. 继承而来的类既可以访问public成员也可以访问protected成员（但访问private成员却不行）。只有在两个类都处于同一个包内时，它才可以访问包访问权限的成员。但现在不必担心继承和protected。
4. 提供访问器（accessor）和变异器（mutator）方法（也称作get/set），以读取和改变数值。

//TODO 练习3-5

#### 带参数的构造器 ####

//TODO 练习6-10

## 7.3 代理 ##

Java没有提供对它的直接支持。这是继承与组合之间的中庸之道，因为我们将一个成员对象置于所要创造的类中（就像组合），但与此同时我们在新类中暴露了该对象的所有方法（就像继承）。

继承会使所有的方法在子类中暴露出来，而代理传递给了底层的controls对象，而其接口由此也就可以使用继承得到的接口相同了，但是，使用代理时可以拥有更多的控制力，因为可以选择只提供在成员对象中的方法的某个子集。

//TODO 练习11

## 7.4 结合使用组合和继承 ##

虽然编译器强制你去初始化基类，并且要求你要在构造器起始处就要这么做，但是它并不监督你必须将成员对象也初始化。

### 7.4.1 确保正确清理 ###

析构函数是一种在对象被销毁时可以被自动调用的函数。其原因可能是因为在Java中，我们的习惯只是忘掉而不是销毁对象，并且让垃圾回收器在必要时释放其内存。

## 7.10 总结 ##




