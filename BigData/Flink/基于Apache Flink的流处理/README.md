# 基于Apache Flink的流处理 #

## 第一章 状态化流处理概述 ##

### 传统数据处理架构 ###

分为两类：事务型处理和分析型处理

#### 事务型处理 ####



#### 分析型处理 ####

提取-转换-加载（ETL）

#### 状态化流处理 ####

### 事件驱动型实用 ###

事件驱动型应用的典型应用场景有：

* 实时推荐
* 模式识别或复杂事件处理
* 异常检测

#### 数据管道 ####

#### 流式分析 ####

### 小结 ###

1. 回顾了传统的数据基础架构，业务应用的常规设计以及当今大多数公司如何收集和分析数据
2. 介绍了状态化流处理的基本思想，解释了如何处理从业务应用和微服务到ETL和数据分析的多种用例
3. 讨论了开源流处理系统如何从20世纪初逐步到ETL和数据分析的多种用例
4. 了解了Apache Flink以及它提供的诸多特性

## 第2章 流处理基础 ##

### Dataflow编程概述 ###

#### Dataflow图 ####

### 并行流处理 ###

### 小结 ###

1. 介绍了Dataflow编程模型以及如何将一个流式应用表示为分布式Dataflow图。
2. 学习并行处理无限流的需求
3. 学习了流式应用中事件的含义
4. 介绍了状态对流式应用的重要性，以及如何应对故障并确保结果正确。


## 第3章 Apache Flink架构 ##

分布式流处理中的一些重要的概念，例如：并行、时间和状态等。

### 系统架构 ###

Flink是一个用于状态化并行流处理的分布式系统。

* Flink和很多集群管理器（如Apache Mesos、YARN及Kubernetes）
* 分布式文件系统（HDFS）或对象存储（如S3）
* Apache ZooKeeper

#### 搭载Flink所需组件 ####

Flink的搭建需要四个不同组件，他们相互协作，共同执行流式应用。这些组件是：

* 作为主进程（master process）：
* 针对不同的环境和资源提供者（resource provider）（如YARN、Mesos、Kubernetes或独立部署）
* TaskManager是Flink的工作进程（worker process）
* Dispatcher会跨多个作业进行，它

#### 应用部署 ####

Flink应用可以通过两种模式进行部署。

* 框架模式：在该模式下，Flink应用会打包成一个JAR文件，通过客户端提交到运行的服务上。
* 库模式：在该模式下，Flink应用会绑定到一个特定应用的容器镜像（如Docker镜像）中。

基于框架的模式采用的是传统方式，即通过客户端提交应用（或查询）到正在运行的服务上；而在库模式中，Flink不是作为服务，而是以库的形式绑定到应用所在的容器镜像中。后者常用于微服务架构。

#### 任务执行 ####

一个TaskManager允许同时执行多个任务。这些任务可以属于同一个算子（数据并行），也可以是不同算子（任务并行），甚至还可以来自不同的应用（作业并行）。TaskManager通过提供固定数量的处理槽来控制可以并行执行的任务数。每个处理槽可以执行应用的一部分，即算子的一个并行任务。

### 高可用性设置 ###

#### TaskManager故障 ####

为了执行应用的全部任务，Flink需要足够数量的处理槽。假设一个Flink设置包含4个TaskManager，每个TaskManager有2个处理槽，那么一个流式应用最多支持以并行度8来运行。

#### JobManager故障 ####

用于控制流式应用执行以及保存该过程中的元数据（如已完成检查点的存储路径）。

## 第6章 基于时间和窗口的算子 ##

定义时间特性、时间戳及水位线

### 配置时间特性 ###

#### ProcessingTime ####

#### EventTime ####

#### IngestionTime ####

### 处理函数 ###