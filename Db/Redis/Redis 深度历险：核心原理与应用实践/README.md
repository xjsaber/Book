# Redis深度历险：核心原理和应用实践 #

# 基础：Redis基础数据结构 #

## string（字符串） ##

Redis字符串是动态字符串，可以修改的字符串，内部结构实现类似于Java的ArrayList，采用预分配冗余空间的方式来减少内存的频繁分配。

#### 批量键值对 ####

可以批量对多个字符串进行读写。

	mset

#### 过期和set命令扩展 ####

对key设置过期时间，到点自动删除，常用来控制缓存的失效时间。

#### 计数 ####

# 应用1：分布式锁 #

## 分布式锁 ##

分布式锁本质要实现的目标就是在Redis里面占一个“茅坑”，当别的进程也要占时，用完了，再用del指令释放茅坑

## 超时问题 ##

# 应用2：延时队列 #

## 异步队列 ##

Redis的list（列表）数据结构常用来做异步消息队列使用，使用rpush/lpush操作入队列，使用lpop/rpop来出队列。

## 队列空了怎么办 ##

## 队列延迟 ##

这两个指令的前缀字符b代表的是blocking，也就是阻塞读。

阻塞读在队列没有数据的时候，会立即进入休眠状态，一旦数据到来，则立刻醒过来。消息的延迟几乎为零。用`blpop/brpop`替代前面的`lpop/rpop`，就完美解决了上面的问题。

## 空闲连接自动断开 ##

空闲连接，服务器断开了连接，这时候使用`blpop/brpop`会抛出异常，需要在catch中进行处理

## 锁冲突处理 ##
